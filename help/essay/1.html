<h1>Js SuperCollider</h1><p><a href="https://rd.slavepianos.org/t/jssc3">jssc3</a> is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">Javascript</a> (Js) library for interacting with the <a href="http://audiosynth.com/">SuperCollider</a> (Sc) real-time synthesiser.</p><p>Js is a dynamic language in the <a href="https://www.scheme.com/tspl4/">Scheme</a> family.  A Js interpreter is included as a part of most web browsers.  Sc is a family of real-time audio signal processing systems written by James McCartney (JMcC).</p><p>Sc is in two parts, a language interpreter in the <a href="http://archive.org/details/byte-magazine-1981-08/">Smalltalk</a> (St) family called <em>sclang</em>,  and a real-time synthesiser in the <a href="https://doi.org/10.2307/3679463">Music-N</a> family called <em>scsynth</em>.  scsynth is a <em>background process</em>, it connects to the audio system and then listens for <a href="https://opensoundcontrol.stanford.edu/">OpenSoundControl</a> (Osc) messages, which communicate both definitions of sound processing programs and real-time control data to interact with these programs.</p><p>scsynth can be compiled to <a href="https://webassembly.org/">WebAssembly</a> (Wasm) and embedded as a process in an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML">Html</a> page.  Osc packets can be sent from the web browsers Js interpreter to the synthesiser.  In this schema the Js interpreter in the browser acts in the place of sclang.</p><p><em>jssc3</em> contains functions to define sound processing programs as graphs of <em>unit generators</em>, to compile these graphs into the format understood by scsynth, and to send these to the synthesiser.</p><h2>Rich Text Editor</h2><p>This page is a simple rich text editor for <em>jssc3</em> programs.  The controls below the text area are for communicating with the Sc synthesiser.</p><p>When this page is first loaded the Wasm form of scsynth is fetched and cached.  While this is occuring the <em>status area</em> (rightmost text area) will display <em>Loading...</em>, this process may take some time.  Once loaded the status will display <em>----</em>, indicating the page is ready, after which the synthesiser can be started by clicking <em>Boot</em>.  When the synthesiser is running the status will indicate the number of <em>unit generators</em> that are currently running, initially this will be zero.</p><p>When the synthesiser is running, programs can be run by selecting the text describing the program and pressing the <em>Play</em> button.  To quieten the synthesiser press the <em>Reset</em> button.  The control buttons all have <em>access keys</em> associated with them, <em>b</em> for <em>Boot</em>, <em>comma</em> (,) for <em>Play</em> and <em>period</em> (.) for <em>Stop</em>.</p><p>A very simple Sc program is <em>mul(SinOsc(440, 0), 0.1)</em>.  Selecting this text and pressing <em>Play</em> will generate a 440 <em>hz</em> sine tone in the left channel.  The period at the end of the sentence is not a part of the program, if it is accidentally selected the program will have a <em>syntax error</em> and a message will be printed in the Js console.  (The console can be opened from the browser menu, or by typing a key combination, often <em>Conrol-Shift-i</em>.)</p><p>When running, the status area will indicate that this program involves 4 unit generators.  Two are written in the program, <em>SinOsc</em> and <em>mul</em>, the other two, <em>Out</em> and <em>MaxLocalBufs</em>, are implicit.  Pressing the <em>Print</em> button will print the program as a sequence of unit generators to the Js console.</p><p>To make programs simpler to select they can be set apart in a <em>&lt;/&gt;</em>  paragraph by themselves.  The program below is an Sc2 example graph by JMcC.  It makes bird like sounds.  When running, the status area will indicate that the program involves 108 unit generators.</p><pre><code>OverlapTexture(function(tr) {
    var p1, p2, sw, freq, amp;
    p1 = mul(LFPulse(TRand(0.4, 1.4, tr), 0, TRand(0.1, 0.9, tr)), TRand(4, 7, tr));
    p2 = mul(LFPulse(TRand(0.2, 0.7, tr), 0, 0.4), 0.02);
    sw = add(add(mul(LFSaw(add(p1, 2), 0), negated(TRand(1000, 1800, tr))), 4000), TRand(-1200, 1200, tr));
    freq = Lag(sw, 0.05);
    amp = Lag(p2, 0.3);
    return Pan2(SinOsc(freq, 0), TRand(-1, 1, tr), amp);
}, 7, 4, 4)
</code></pre><h2>Binary operators</h2><p>In Js operators are special forms and are not extensible.</p><p>Where in St multiplication of two signals is written <em>SinOsc(440, 0) * 0.1</em>, in Js it is written <em>mul(SinOsc(440, 0), 0.1)</em>.</p><p>While the prefix form is required for signal operators the infix forms is allowed for constants, <em>mul(SinOsc([440, 440 * 0.1], 0), [0.1, 0.1 / 2])</em>.</p>
